# Using Real Player Data for PDF Generation

This guide explains how to generate PDF reports with real player performance data instead of demo data.

## Overview

The PDF generation system has been updated to fetch and use real player data from your API instead of relying on demo data. This allows you to generate accurate, data-driven reports for player performance analysis.

## Key Components

1. **ExportPdfButton**: The UI component that triggers PDF generation
2. **pdfGenerator.tsx**: Handles the PDF generation process
3. **playerPerformanceService.ts**: Fetches and formats real player data for PDF generation
4. **exportPlayerPdf.ts**: Helper utilities for creating PDF export options

## Basic Usage

### 1. Season Report for a Player

```tsx
import { ExportPdfButton } from '@/components/ui/export-pdf-button'
import { PdfTypeEnum } from '@/config/PdfType'

const PlayerProfile = ({ playerId, playerName }) => {
  return (
    <div>
      <h1>{playerName}'s Profile</h1>
      
      <ExportPdfButton 
        options={{
          title: `${playerName} - Season Report`,
          subtitle: 'Season Analysis',
          exportType: PdfTypeEnum.FULL_PLAYER_REPORT,
          playerId: playerId, // This is the key field that triggers real data fetching
          filename: `${playerName.toLowerCase().replace(/\s+/g, '-')}-season-report.pdf`,
          footerText: 'Generated by PlayerVista'
        }}
        customLabel="Export Season Report"
      />
    </div>
  )
}
```

### 2. Match Report for a Player

```tsx
import { ExportPdfButton } from '@/components/ui/export-pdf-button'
import { PdfTypeEnum } from '@/config/PdfType'

const MatchPerformance = ({ playerId, playerName, matchId, opponentName }) => {
  return (
    <div>
      <h1>{playerName}'s Performance vs {opponentName}</h1>
      
      <ExportPdfButton 
        options={{
          title: `${playerName} vs ${opponentName}`,
          subtitle: 'Match Analysis',
          exportType: PdfTypeEnum.SINGLE_MATCH_PLAYER_REPORT,
          playerId: playerId, // Player ID for fetching player data
          eventId: matchId,   // Match ID for filtering performance data
          filename: `${playerName.toLowerCase().replace(/\s+/g, '-')}-vs-${opponentName.toLowerCase().replace(/\s+/g, '-')}.pdf`,
          footerText: 'Generated by PlayerVista'
        }}
        customLabel="Export Match Report"
        variant="secondary"
      />
    </div>
  )
}
```

## Using Helper Utilities

For convenience, you can use the helper functions in `exportPlayerPdf.ts`:

```tsx
import { ExportPdfButton } from '@/components/ui/export-pdf-button'
import { createPlayerSeasonPdfOptions, createPlayerMatchPdfOptions } from '@/utils/exportPlayerPdf'

// For season reports
const seasonOptions = createPlayerSeasonPdfOptions(playerId, playerName, teamName)
<ExportPdfButton options={seasonOptions} customLabel="Export Season Report" />

// For match reports
const matchOptions = createPlayerMatchPdfOptions(playerId, playerName, matchId, opponentName, matchDate)
<ExportPdfButton options={matchOptions} customLabel="Export Match Report" />
```

## How It Works

1. When you provide a `playerId` to the ExportPdfButton's options, the system will:
   - Call `fetchPlayerDataForPdf` from the playerPerformanceService
   - Retrieve the player's details and performance data from your API
   - Format the data to match what the PDF components expect
   - Generate the PDF using that real data

2. For match reports (when both `playerId` and `eventId` are provided):
   - The system will fetch all player performances and filter for the specific match
   - Additional match-specific data is prepared for the PDF report

## Customizing the PDF Output

You can customize various aspects of the PDF:

- **Title and Subtitle**: Set in the options object
- **Filename**: Automatically generated based on player/match names, but can be overridden
- **Footer Text**: Custom text at the bottom of each page

## Data Structure

The data structure returned by `fetchPlayerDataForPdf` matches what your PDF components expect:

```typescript
{
  name: "Player Name",
  position: "Position",
  team: "Team Name",
  number: 10,
  age: 25,
  // And many more fields needed by the PDF components
  stats: {
    appearances: 20,
    goals: 5,
    assists: 7,
    // More statistics here
  },
  // Additional data for advanced features
  matchesData: [...], // For performance tables
  performanceData: [...] // For charts and visualizations
}
``` 